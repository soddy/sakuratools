var ver="1.0.0",sakura;function get_class_name(className){var _className=className.substring(0,1).toUpperCase()+className.substring(1);return eval(_className)}function trace(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var s in arguments)console.log(arguments[s])}!function(e){e.stageScaleMode={FIXED_WIDTH:"fixedWidth",FIXED_HEIGHT:"fixedHeight",FIXED_BOTH:"fixedBoth"},e.debug=!1,e.ver=ver}(sakura||(sakura={})),(sakura||(sakura={})).movieClip=function(t){return Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return t.nominalBounds.width*t.scaleX},set:function(e){t.scaleX=e/t.nominalBounds.width}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return t.nominalBounds.height*t.scaleY},set:function(e){t.scaleY=e/t.nominalBounds.height}}),t.getWH=function(){return{w:this.width,h:this.height}},t},function(sakura){function Stage(e,t,s,n,a,i){this.Stage_constructor(),this.canvas=document.getElementById(e),this.enableDOMEvents(!0),this.stageLoadComplete=!1,this.fps=n,this.viewRect={},this.debug(),this.stageInit(t,s,a,i),sakura.data={}}var p=createjs.extend(Stage,createjs.Stage);p.stageInit=function(p,m,v,y){var w=this;void 0===y&&(y=!0);var _=w.canvas,j=document.getElementById("animation_container"),b=document.getElementById("dom_overlay_container");function e(){var e,t,s,n,a,i,r,o,l=p,u=m,d=window.innerWidth,c=window.innerHeight,f=window.devicePixelRatio||1,h=d/l,g=c/u;"fixedWidth"==v?(e=l*h,t=u*h,_.width=l*f*h,_.height=u*f*h,_.style.width=e+"px",_.style.height=t+"px",w.sRatio=f*h):"fixedHeight"==v?(e=l*g,t=u*g,_.width=l*f*g,_.height=u*f*g,_.style.width=e+"px",_.style.height=t+"px",w.sRatio=f*g):"fixedBoth"==v&&(e=l*h,t=u*h,_.width=l*f*h,_.height=u*f*h,_.style.width=e+"px",_.style.height=t+"px",w.sRatio=f*h,parseFloat(_.style.height)<c&&(e=l*g,t=u*g,_.width=l*f*g,_.height=u*f*g,_.style.width=e+"px",_.style.height=t+"px",w.sRatio=f*g)),b.style.left=_.style.left=(b.style.top=_.style.top=(n=y?(s=(c-parseFloat(_.style.height))/2,(d-parseFloat(_.style.width))/2):s=0,s+"px"),n+"px"),j.style.width=d+"px",j.style.height=c+"px",b.style.width=d+"px",b.style.height=c+"px",w.stageLoadComplete=!0,a=0<n?0:parseFloat(Math.abs(l/e*n).toFixed(2)),i=0<s?0:2*parseFloat(Math.abs(s.toFixed(2))),r=l,o=u,w.viewRect={x:a,y:i,width:r,height:o}}window.addEventListener("resize",function(){setTimeout(e,300)}),e()},p.addEventListener=function(type,listener,useCapture){var _self=this,listeners;if("loaded"===type){var fileURL="js/libs/resource.js",req=new XMLHttpRequest;function _listener(){var e=setInterval(function(){_self.stageLoadComplete&&(clearInterval(e),listener((_self.scaleX=_self.sRatio,_self.scaleY=_self.sRatio,document.getElementById("animation_container").style.display="block",createjs.Ticker.setFPS(_self.fps),createjs.Ticker.addEventListener("tick",_self),createjs.Touch.enable(_self),!0)))},50)}req.open("GET",fileURL,!0),req.addEventListener("load",function(){if(200==req.status){var manifest=eval("("+req.response+")").manifest;if(0!=manifest.length){var loader=new createjs.LoadQueue(!1);loader.addEventListener("complete",function(){_listener()}),loader.loadManifest(manifest)}else _listener()}else 404==req.status&&_listener()}),req.send()}listeners=useCapture?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var arr=listeners[type];return arr&&this.removeEventListener(type,listener,useCapture),arr=listeners[type],arr?arr.push(listener):listeners[type]=[listener],listener},p.debug=function(){if(sakura.debug){var e=new createjs.LoadQueue(!1);e.loadFile("libs/vconsole.min.js"),e.on("fileload",function(){new VConsole})}},sakura.Stage=createjs.promote(Stage,"Stage")}(sakura||(sakura={})),function(g){var p=(new Date).valueOf(),m=0,v=0,y=0,w=0;g.loadScene=function(n,a,i){if(m=v=y=w=0,{},g.data.resource={},"string"==typeof n){var e=new createjs.LoadQueue(!1);if(-1!=n.indexOf(".json"))e.loadManifest("resource/"+n),e.on("fileload",function(e){var t=e.result;0!=(t=t.delEmptyObj()).length?h(t,function(e){a(e)},function(e){i(e)}):(a(100),i(!0))});else(t=[]).push("animatejs/"+n+".js?"+p),t.push("js/"+n+"Class.js?"+p),e.loadManifest(t),e.on("complete",function(){var e=get_class_name(n).properties.manifest;0!=(e=e.delEmptyObj()).length?h(e,function(e){a(e)},function(e){var t=get_class_name(n).ssMetadata;if(0!=t.length)for(var s=0;s<t.length;s++)ss[t[s].name]=new createjs.SpriteSheet({images:[images[t[s].name]],frames:t[s].frames});i(e)}):(a(100),i(!0))})}else if(Array.isArray(n)){n=n.unique3();for(var t=[],s=[],r=void 0,o=[],l=0;l<n.length;l++)"string"==typeof n[l]?-1!=n[l].indexOf(".json")?s.push("resource/"+n[l]):(t.push("animatejs/"+n[l]+".js?"+p),t.push("js/"+n[l]+"Class.js?"+p),o.push(n[l])):Array.isArray(n[l])||void 0===n[l]||n[l].hasOwnProperty("manifest")&&(r=n[l]);e=new createjs.LoadQueue(!1);var u=[],d=!0;0<s.length?(e.loadManifest(s),e.on("fileload",function(e){u.push(e.result[0]),d=!1}),e.on("error",function(e){d=!1})):d=!1;var c=setInterval(function(){if(!d){clearInterval(c);var e=new createjs.LoadQueue(!1);e.loadManifest(t),e.on("complete",function(){for(var e=[],s=[],t=0;t<o.length;t++)e=e.concat(get_class_name(o[t]).properties.manifest),s=s.concat(get_class_name(o[t]).ssMetadata);0<u.length&&(e=e.concat(u)),null!=r&&(e=e.concat(r.manifest)),0!=(e=e.delEmptyObj()).length?h(e=uniqe_by_keys(e,["src","id"]),function(e){a(e)},function(e){if(0!=s.length){s=uniqe_by_keys(s,["name","frames"]);for(var t=0;t<s.length;t++)ss[s[t].name]=new createjs.SpriteSheet({images:[images[s[t].name]],frames:s[t].frames})}i(e)}):(a(100),i(!0))})}},20)}else if(!Array.isArray(n)&&void 0!==n&&n.hasOwnProperty("manifest"))if(0!=n.manifest.length){var f=uniqe_by_keys(n.manifest,["src","id"]);0!=(f=f.delEmptyObj()).length?h(f,function(e){a(e)},function(e){i(e)}):(a(100),i(!0))}else a(100),i(!0);function h(e,t,s){if(0<e.length){v=e.length,y=1/v;var n=new g.UrlLoader;if(g.loadMulti(0,e,n),t)var a=setInterval(function(){0!=n.getTotal()&&(w==v?(clearInterval(a),t(100),s&&s(!0)):t(parseInt(100*(m+n.getLoaded()/n.getTotal()*y))))},20)}}},g.loadMulti=function(t,s,n){t<s.length&&n.load(s[t].src,s[t].id,function(e){"undefined"!=typeof images&&(images[s[t].id]=e),m+=y,w=++t,g.loadMulti(t,s,n)})},g.UrlLoader=function(){this.loaded=0,this.total=0,this.load=function(n,a,i){var t=this;t.loaded=0,t.total=0;var e=new XMLHttpRequest;e.open("GET",n,!0),e.addEventListener("progress",function(e){e.lengthComputable&&(t.loaded=e.loaded,t.total=e.total)},!1),e.responseType="blob",e.addEventListener("load",function(){if(window.URL=window.URL||window.webkitURL,200===this.status){var e=this.response;if(new RegExp(/([^\s]+(?=\.(jpg|png|jpeg|gif))\.\2)/gi).test(n.toLowerCase())){var t=document.createElement("img");t.src=window.URL.createObjectURL(e),g.data.resource[a]=t.src}if(new RegExp(/([^\s]+(?=\.(ac3|m4a|mp3|ogg))\.\2)/gi).test(n.toLowerCase())){var s=document.createElement("audio");s.src=window.URL.createObjectURL(e),g.data.resource[a]=s.src}i(t)}else 404==this.status&&i(!1)}),e.send()},this.getLoaded=function(){return this.loaded},this.getTotal=function(){return this.total}}}(sakura||(sakura={}));var _obj2key=function(e,t){for(var s=t.length,n=[];s--;)n.push(e[t[s]]);return n.join("|")};function uniqe_by_keys(e,t){for(var s=[],n={},a=0,i=e.length;a<i;a++){var r=_obj2key(e[a],t);r in n||(n[r]=!0,s.push(e[a]))}return s}Array.prototype.unique3=function(){for(var e=[],t={},s=0;s<this.length;s++)t[this[s]]||(e.push(this[s]),t[this[s]]=1);return e},Array.prototype.delEmptyObj=function(){for(var e=[],t=0;t<this.length;t++)"{}"!=JSON.stringify(this[t])&&e.push(this[t]);return e};