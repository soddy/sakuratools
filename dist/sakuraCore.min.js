var ver="1.2.1",sakura;function get_class_name(className){var _className=className.substring(0,1).toUpperCase()+className.substring(1);return eval(_className)}function trace(){for(var e,t=[],s=0;s<arguments.length;s++)t[+s]=arguments[s];for(e in arguments)console.log(arguments[e])}!function(e){e.stageScaleMode={FIXED_WIDTH:"fixedWidth",FIXED_HEIGHT:"fixedHeight",FIXED_BOTH:"fixedBoth"},e.debug=!1,e.ver=ver}(sakura=sakura||{}),(sakura||(sakura={})).movieClip=function(t){var s=stage.viewRect.height/parseFloat(stage.canvas.style.height);return Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return t.nominalBounds.width*t.scaleX},set:function(e){t.scaleX=e/t.nominalBounds.width}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return t.nominalBounds.height*t.scaleY},set:function(e){t.scaleY=e/t.nominalBounds.height}}),t.getWH=function(){return{w:this.width,h:this.height}},t.position={top:function(e){e=null==e?0:e,t.y=Math.abs(parseFloat(stage.canvas.style.top))*s+t.regY+e},left:function(e){e=null==e?0:e,t.x=t.regX+e},bottom:function(e){e=null==e?0:e,t.y=stage.viewRect.height-Math.abs(parseFloat(stage.canvas.style.top))*s-t.height+t.regY-e},right:function(e){e=null==e?0:e,t.x=stage.viewRect.width-t.width+t.regX-e}},t},function(sakura){function Stage(e,t,s,n,a,i){this.Stage_constructor(),this.canvas=document.getElementById(e),this.enableDOMEvents(!0),this.stageLoadComplete=!1,this.fps=n,this.viewRect={},this.debug(),this.stageInit(t,s,a,i),sakura.data={}}var p=createjs.extend(Stage,createjs.Stage);p.stageInit=function(u,h,d,f){var g=this;void 0===f&&(f=!0);var p=g.canvas,m=document.getElementById("animation_container"),v=document.getElementById("dom_overlay_container");function e(){var e,t,s,n=u,a=h,i=window.innerWidth,r=window.innerHeight,o=window.devicePixelRatio||1,l=i/n,c=r/a;"fixedWidth"==d?(e=n*l,t=a*l,p.width=n*o*l,p.height=a*o*l,p.style.width=e+"px",p.style.height=t+"px",g.sRatio=o*l):"fixedHeight"==d?(e=n*c,t=a*c,p.width=n*o*c,p.height=a*o*c,p.style.width=e+"px",p.style.height=t+"px",g.sRatio=o*c):"fixedBoth"==d&&(e=n*l,t=a*l,p.width=n*o*l,p.height=a*o*l,p.style.width=e+"px",p.style.height=t+"px",g.sRatio=o*l,parseFloat(p.style.height)<r&&(e=n*c,t=a*c,p.width=n*o*c,p.height=a*o*c,p.style.width=e+"px",p.style.height=t+"px",g.sRatio=o*c)),c=f?(s=(r-parseFloat(p.style.height))/2,(i-parseFloat(p.style.width))/2):s=0,v.style.top=p.style.top=s+"px",v.style.left=p.style.left=c+"px",m.style.width=i+"px",m.style.height=r+"px",v.style.width=i+"px",v.style.height=r+"px",g.stageLoadComplete=!0,c=0<c?0:parseFloat(Math.abs(n/e*c).toFixed(2)),s=0<s?0:2*parseFloat(Math.abs(s.toFixed(2))),g.viewRect={x:c,y:s,width:n,height:a}}window.addEventListener("resize",function(){setTimeout(e,300)}),e()},p.addEventListener=function(type,listener,useCapture){var _self=this,fileURL,req,listeners;function _listener(){var e=setInterval(function(){_self.stageLoadComplete&&(clearInterval(e),listener((_self.scaleX=_self.sRatio,_self.scaleY=_self.sRatio,document.getElementById("animation_container").style.display="block",createjs.Ticker.setFPS(_self.fps),createjs.Ticker.addEventListener("tick",_self),createjs.Touch.enable(_self),!0)))},50)}"loaded"===type&&(fileURL="js/libs/resource.js",req=new XMLHttpRequest,req.open("GET",fileURL,!0),req.addEventListener("load",function(){var manifest,loader;200==req.status?(manifest=eval("("+req.response+")").manifest,0!=manifest.length?(loader=new createjs.LoadQueue(!1),loader.addEventListener("complete",function(){_listener()}),loader.loadManifest(manifest)):_listener()):404==req.status&&_listener()}),req.send()),listeners=useCapture?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var arr=listeners[type];return arr&&this.removeEventListener(type,listener,useCapture),arr=listeners[type],arr?arr.push(listener):listeners[type]=[listener],listener},p.debug=function(){var e;sakura.debug&&((e=new createjs.LoadQueue(!1)).loadFile("libs/vconsole.min.js"),e.on("fileload",function(){new VConsole}))},sakura.Stage=createjs.promote(Stage,"Stage")}(sakura=sakura||{}),function(m){var v=(new Date).valueOf(),y=0,w=0,_=0,j=0;m.loadScene=function(n,a,i,r){if(y=w=_=j=0,m.data.resource={},"string"==typeof n){var e=new createjs.LoadQueue(!1);-1!=n.indexOf(".json")?(e.loadManifest("js/resource/"+n),e.on("fileload",function(e){var t=e.result;if(0!=(t=t.delEmptyObj()).length){if(null!=r)for(var s,n=0;n<t.length;n++){-1==t[n].src.indexOf("http")&&-1==t[n].src.indexOf("https")&&(s=t[n].src.split("/"),t[n].src=r+s[s.length-1])}p(t,function(e){a(e)},function(e){i(e)})}else a(100),i(!0)})):((t=[]).push("animatejs/"+n+".js?"+v),t.push("js/"+n+"Class.js?"+v),e.loadManifest(t),e.on("complete",function(){var e=get_class_name(n).properties.manifest;if(0!=(e=e.delEmptyObj()).length){if(null!=r)for(var t,s=0;s<e.length;s++){-1==e[s].src.indexOf("http")&&-1==e[s].src.indexOf("https")&&(t=e[s].src.split("/"),e[s].src=r+t[t.length-1])}p(e,function(e){a(e)},function(e){var t=get_class_name(n).ssMetadata;if(0!=t.length)for(var s=0;s<t.length;s++)ss[t[s].name]=new createjs.SpriteSheet({images:[images[t[s].name]],frames:t[s].frames});i(e)})}else a(100),i(!0)}))}else if(Array.isArray(n)){n=n.unique3();for(var t=[],s=[],o=void 0,l=[],c=0;c<n.length;c++)"string"==typeof n[c]?-1!=n[c].indexOf(".json")?s.push("js/resource/"+n[c]):(t.push("animatejs/"+n[c]+".js?"+v),t.push("js/"+n[c]+"Class.js?"+v),l.push(n[c])):Array.isArray(n[c])||void 0===n[c]||n[c].hasOwnProperty("manifest")&&(o=n[c]);var e=new createjs.LoadQueue(!1),u=[],h=!0;0<s.length?(e.loadManifest(s),e.on("fileload",function(e){u.push(e.result[0]),h=!1}),e.on("error",function(e){h=!1})):h=!1;var d=setInterval(function(){var e;h||(clearInterval(d),(e=new createjs.LoadQueue(!1)).loadManifest(t),e.on("complete",function(){for(var e=[],s=[],t=0;t<l.length;t++)e=e.concat(get_class_name(l[t]).properties.manifest),s=s.concat(get_class_name(l[t]).ssMetadata);if(0<u.length&&(e=e.concat(u)),null!=o&&(e=e.concat(o.manifest)),0!=(e=e.delEmptyObj()).length){if(e=uniqe_by_keys(e,["src","id"]),null!=r)for(var n,t=0;t<e.length;t++){-1==e[t].src.indexOf("http")&&-1==e[t].src.indexOf("https")&&(n=e[t].src.split("/"),e[t].src=r+n[n.length-1])}p(e,function(e){a(e)},function(e){if(0!=s.length){s=uniqe_by_keys(s,["name","frames"]);for(var t=0;t<s.length;t++)ss[s[t].name]=new createjs.SpriteSheet({images:[images[s[t].name]],frames:s[t].frames})}i(e)})}else a(100),i(!0)}))},20)}else if(!Array.isArray(n)&&void 0!==n&&n.hasOwnProperty("manifest"))if(0!=n.manifest.length){var f=uniqe_by_keys(n.manifest,["src","id"]);if(0!=(f=f.delEmptyObj()).length){if(null!=r)for(var g,c=0;c<f.length;c++){-1==f[c].src.indexOf("http")&&-1==f[c].src.indexOf("https")&&(g=f[c].src.split("/"),f[c].src=r+g[g.length-1])}p(f,function(e){a(e)},function(e){i(e)})}else a(100),i(!0)}else a(100),i(!0);function p(e,t,s){var n,a;0<e.length&&(w=e.length,_=1/w,n=new m.UrlLoader,m.loadMulti(0,e,n),t&&(a=setInterval(function(){0!=n.getTotal()&&(j==w?(clearInterval(a),t(100),s&&s(!0)):t(parseInt(100*(y+n.getLoaded()/n.getTotal()*_))))},20)))}},m.loadMulti=function(t,s,n){t<s.length&&n.load(s[t].src,s[t].id,function(e){"undefined"!=typeof images&&(images[s[t].id]=e),y+=_,j=++t,m.loadMulti(t,s,n)})},m.UrlLoader=function(){this.loaded=0,this.total=0,this.load=function(n,a,i){var t=this;t.loaded=0,t.total=0;var e=new XMLHttpRequest;e.open("GET",n,!0),e.addEventListener("progress",function(e){e.lengthComputable&&(t.loaded=e.loaded,t.total=e.total)},!1),e.responseType="blob",e.addEventListener("load",function(){var e,t,s;window.URL=window.URL||window.webkitURL,200===this.status?(e=this.response,new RegExp(/([^\s]+(?=\.(jpg|png|jpeg|gif))\.\2)/gi).test(n.toLowerCase())&&((t=document.createElement("img")).src=window.URL.createObjectURL(e),m.data.resource[a]=t.src),new RegExp(/([^\s]+(?=\.(ac3|m4a|mp3|ogg))\.\2)/gi).test(n.toLowerCase())&&((s=document.createElement("audio")).src=window.URL.createObjectURL(e),m.data.resource[a]=s.src),i(t)):404==this.status&&i(!1)}),e.send()},this.getLoaded=function(){return this.loaded},this.getTotal=function(){return this.total}}}(sakura=sakura||{});var _obj2key=function(e,t){for(var s=t.length,n=[];s--;)n.push(e[t[s]]);return n.join("|")};function uniqe_by_keys(e,t){for(var s=[],n={},a=0,i=e.length;a<i;a++){var r=_obj2key(e[a],t);r in n||(n[r]=!0,s.push(e[a]))}return s}Array.prototype.unique3=function(){for(var e=[],t={},s=0;s<this.length;s++)t[this[s]]||(e.push(this[s]),t[this[s]]=1);return e},Array.prototype.delEmptyObj=function(){for(var e=[],t=0;t<this.length;t++)"{}"!=JSON.stringify(this[t])&&e.push(this[t]);return e};